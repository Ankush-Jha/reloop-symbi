<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Leaderboard - ReLoop</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="../../css/styles.css">

    <style>
        .leaderboard-container {
            min-height: 100vh;
            background: var(--color-surface-dark);
            padding-bottom: 180px;
        }

        .leaderboard-header {
            padding: var(--space-8) var(--space-4) var(--space-4);
            text-align: center;
            position: relative;
        }

        .leaderboard-title {
            font-size: clamp(2.5rem, 12vw, 3.5rem);
            font-weight: 900;
            font-style: italic;
            letter-spacing: -0.03em;
            line-height: 0.85;
            text-transform: uppercase;
            color: var(--color-primary);
            text-shadow: 0 0 30px var(--color-primary-glow);
            transform: rotate(-1deg);
            margin-bottom: var(--space-3);
        }

        .leaderboard-subtitle {
            display: inline-block;
            background: var(--color-surface-card);
            border: 1px solid var(--color-border);
            padding: var(--space-1) var(--space-4);
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: 700;
            letter-spacing: 0.2em;
            text-transform: uppercase;
        }

        .back-btn {
            position: absolute;
            top: var(--space-6);
            left: var(--space-4);
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid var(--color-border);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-text-primary);
            text-decoration: none;
            transition: all var(--transition-base);
        }

        .back-btn:hover {
            background: var(--color-primary);
            color: #000;
            border-color: var(--color-primary);
        }

        /* Top Player Card */
        .top-player-card {
            margin: 0 var(--space-4) var(--space-6);
            background: linear-gradient(to bottom, #1c1c1c, #000);
            border: 2px solid #FFD23F;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 0 25px rgba(255, 210, 63, 0.15);
        }

        .rank-badge {
            position: absolute;
            top: -12px;
            background: #FFD23F;
            color: #000;
            font-size: var(--text-sm);
            font-weight: 900;
            padding: var(--space-1) var(--space-4);
            border-radius: var(--radius-md);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            border: 2px solid #000;
            box-shadow: 4px 4px 0 #000;
        }

        .top-avatar {
            position: relative;
            margin-top: var(--space-3);
            margin-bottom: var(--space-3);
        }

        .top-avatar img {
            width: 96px;
            height: 96px;
            border-radius: var(--radius-xl);
            border: 4px solid #FFD23F;
            object-fit: cover;
        }

        .top-avatar .crown {
            position: absolute;
            top: -28px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateX(-50%) translateY(0);
            }

            50% {
                transform: translateX(-50%) translateY(-6px);
            }
        }

        .top-avatar .level-badge {
            position: absolute;
            bottom: -8px;
            right: -8px;
            background: var(--color-primary);
            color: #000;
            font-size: var(--text-xs);
            font-weight: 700;
            padding: 2px 8px;
            border-radius: var(--radius-full);
            border: 1px solid #000;
        }

        .top-username {
            font-size: var(--text-xl);
            font-weight: 900;
            text-transform: uppercase;
            font-style: italic;
            letter-spacing: -0.02em;
        }

        .top-points {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-top: var(--space-1);
        }

        .top-points .icon {
            color: #FFD23F;
            font-size: 24px;
        }

        .top-points .value {
            color: #FFD23F;
            font-size: var(--text-2xl);
            font-weight: 700;
            font-family: monospace;
            text-shadow: 0 0 15px rgba(255, 210, 63, 0.4);
        }

        /* Leaderboard List */
        .leaderboard-list {
            padding: 0 var(--space-4);
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            background: #1a1a1a;
            border: 2px solid #333;
            padding: var(--space-3);
            border-radius: var(--radius-xl);
            transition: all var(--transition-base);
        }

        .leaderboard-item:hover {
            border-color: var(--color-primary);
        }

        .rank-number {
            flex-shrink: 0;
            width: 32px;
            height: 32px;
            background: var(--color-primary);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-weight: 900;
            font-size: var(--text-sm);
            margin-right: var(--space-3);
            box-shadow: 0 0 10px var(--color-primary-glow);
        }

        .player-avatar {
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--color-border);
            overflow: hidden;
            margin-right: var(--space-3);
        }

        .player-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .player-info {
            flex-grow: 1;
            min-width: 0;
        }

        .player-name {
            font-weight: 700;
            color: var(--color-text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .player-dept {
            font-size: var(--text-xs);
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .player-points {
            flex-shrink: 0;
            display: flex;
            align-items: center;
            gap: var(--space-1);
            color: var(--color-primary);
        }

        .player-points .icon {
            font-size: 16px;
        }

        .player-points .value {
            font-family: monospace;
            font-weight: 700;
            font-size: var(--text-lg);
        }

        /* Your Rank Card */
        .your-rank-card {
            position: fixed;
            bottom: 96px;
            left: var(--space-4);
            right: var(--space-4);
            max-width: 430px;
            margin: 0 auto;
            background: var(--color-primary);
            color: #000;
            border: 4px solid #000;
            padding: var(--space-3) var(--space-5);
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            box-shadow: 0 10px 30px rgba(46, 184, 103, 0.25);
            z-index: 40;
            overflow: hidden;
        }

        .your-rank-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 80px;
            height: 100%;
            background: linear-gradient(to left, rgba(255, 255, 255, 0.3), transparent);
            transform: skewX(12deg);
        }

        .your-rank-number {
            flex-shrink: 0;
            width: 48px;
            height: 48px;
            background: #000;
            color: var(--color-primary);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: var(--text-lg);
            margin-right: var(--space-4);
            border: 2px solid rgba(0, 0, 0, 0.1);
        }

        .your-info {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .your-label {
            font-weight: 900;
            font-size: var(--text-xl);
            text-transform: uppercase;
            line-height: 1;
        }

        .your-motivation {
            font-size: var(--text-xs);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            opacity: 0.8;
            margin-top: var(--space-1);
        }

        .your-points {
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .your-points-label {
            font-size: var(--text-xs);
            font-weight: 700;
            text-transform: uppercase;
            opacity: 0.7;
        }

        .your-points-value {
            font-family: monospace;
            font-weight: 900;
            font-size: var(--text-2xl);
            line-height: 1;
        }

        /* Grid background pattern */
        .bg-grid {
            position: fixed;
            inset: 0;
            pointer-events: none;
            opacity: 0.3;
            background-image:
                linear-gradient(rgba(46, 184, 103, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(46, 184, 103, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: 0;
        }
    </style>
</head>

<body>
    <div class="bg-grid"></div>
    <div class="app-container">
        <div class="leaderboard-container">
            <!-- Header -->
            <header class="leaderboard-header">
                <a href="../core/home.html" class="back-btn">
                    <span class="material-symbols-outlined">arrow_back</span>
                </a>
                <h1 class="leaderboard-title">Campus<br>Ranking</h1>
                <div class="leaderboard-subtitle">Top 50 Planet Protectors</div>
            </header>

            <!-- Top Player -->
            <div class="top-player-card stagger-item">
                <div class="rank-badge">Rank #1</div>
                <div class="top-avatar">
                    <span class="crown">ðŸ‘‘</span>
                    <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuAKpUQ4iADzLq-ccOV1CPZoSFuDlTjC6me7On072Iu604MKDrc41FIze13cZoInG53M0oSRrSE1CAoSrq8HyQV1JbWWpqr7JsurQ6x7U7tvwByuZZXv2xNWV1lTXlhGEbcHXMuCD_g6j7mz42NtjjON0kXjQa-1bmaF4QLxvBoeKgC4oJJpn_o0LKGzDV84b3x_kORdU19P-KzHxHih9YN3myehOa4v0W6YOx0Un6th8GN223vCsjikY9glwStv5holxulY-zTl2uE"
                        alt="Top Player">
                    <span class="level-badge">Lvl 24</span>
                </div>
                <h2 class="top-username">Eco_Beast</h2>
                <div class="top-points">
                    <span class="material-symbols-outlined icon">trophy</span>
                    <span class="value">4.2k pts</span>
                </div>
            </div>

            <!-- Leaderboard List -->
            <div class="leaderboard-list">
                <div class="leaderboard-item stagger-item">
                    <div class="rank-number">2</div>
                    <div class="player-avatar">
                        <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuAaty_8pOqc7WeTqO76RukZ3Q9Cu4hm3fT0oobm0S3iSXOLkk7vU7OdBTR7rqtWTDxq7n3HWGvhJkArrC3wQ5E8WSSZAZG47KC9tVeSMqpf9-2ecnQN2fhwlMEDTgymlE_I2zeC46rTtdDlWTvOv_jH-wO5999W4Ymj7gGvLDIoG6_cwMxxntShFa630lbKpRUbn4tWrfvOi9Nt8L1XnHh157VZGMMcL4r7lSiHoCVetm6FO1GtAoVNRTDC-XDYPLFvjn6-DOSdz-4"
                            alt="Player">
                    </div>
                    <div class="player-info">
                        <div class="player-name">GreenMachine</div>
                        <div class="player-dept">Biology Dept</div>
                    </div>
                    <div class="player-points">
                        <span class="material-symbols-outlined icon">monetization_on</span>
                        <span class="value">3.9k</span>
                    </div>
                </div>

                <div class="leaderboard-item stagger-item">
                    <div class="rank-number">3</div>
                    <div class="player-avatar">
                        <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuApkHqu9en_dVgoUQ5TxuxRwSW6yU7PlEVw7qMyX8NYJDg5JUimrQSXFdhHGR7Ud2rtjzu9TqorwH8tqn4yq11F-adrhv8T3hnPTMvRdQ-v3SZWx1-8DrFuTzQST64A5ZZq8xq-yoUiNvp-gHkAnPzdsCJR_pOBj-7tSGs4IiPI9oXnbKHMS34Bt4v54Q6TNgD0u3_T1dsJPK3GntZKruZiOGgQeu27ZTXDWSkfiLbcEZphBARRLRjk3i0msDHXE1vMz2nlqIHfcWI"
                            alt="Player">
                    </div>
                    <div class="player-info">
                        <div class="player-name">SustainSara</div>
                        <div class="player-dept">Arts Dept</div>
                    </div>
                    <div class="player-points">
                        <span class="material-symbols-outlined icon">monetization_on</span>
                        <span class="value">3.6k</span>
                    </div>
                </div>

                <div class="leaderboard-item stagger-item">
                    <div class="rank-number">4</div>
                    <div class="player-avatar">
                        <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuCh2UC2A0xMi9I7nN3x-If9ZJ7sdFv9hXhw989YFXZbrVy9p-D8C_iSqcEkJYoRxTvnO3v1YGF_LSoVoci4aVNT5E9_F4CS6sF4P1cRTgARYXUvLPn602HQ3hh-T5dGBBTWSAgZ5fSusqof6XmjE-BqoyYv9ESOGFb6lMEFcnQNvvCIrITCLbcHW1tfqtkgPJFFUz9XRtUNAlzGkLEybpwBd0Bc2UHEXdUBtsvHN7O-OSl5EQfa2q22sdFpvE-IxPlMdTSkObxv7jY"
                            alt="Player">
                    </div>
                    <div class="player-info">
                        <div class="player-name">RecycleRex</div>
                        <div class="player-dept">Engineering</div>
                    </div>
                    <div class="player-points">
                        <span class="value">3.4k</span>
                    </div>
                </div>

                <div class="leaderboard-item stagger-item" style="opacity: 0.9;">
                    <div class="rank-number">5</div>
                    <div class="player-avatar">
                        <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuBelXdz8Wp45Kl2hZcqo1_bdv0Rfr48Y8zt93-EBUt8W5AT1RDyeekMRlVfeeK8hr0KTLnzlb8iEqgIDGbdkrtTHx78trLM9wZlKCMwb05rFxBn6PqI4rEosK_8i69k2KLToOk3zZE61QLb0l9OvNIRJJHTbboqejcUiwBoPi_c3z95IN0-bnSV5GcWl9BVWra1ru3IGj1WDgp7o--JYrTgUCXZPQJFf5Ak_ZTqOLns8gubgPAJG-kAlNDFz9nymFOBtKBsvdRV4jM"
                            alt="Player">
                    </div>
                    <div class="player-info">
                        <div class="player-name">PlanetPatrol</div>
                        <div class="player-dept">Environmental Studies</div>
                    </div>
                    <div class="player-points">
                        <span class="value">3.1k</span>
                    </div>
                </div>

                <div class="leaderboard-item stagger-item" style="opacity: 0.8;">
                    <div class="rank-number">6</div>
                    <div class="player-avatar">
                        <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuD-POzETbkZrMqAXm2AOc3Jqfftdv-5ZyWAl10DoOBCWeWm2r2UhAr2ZAtUcIq9udXL93z5WDbg3zuUA2RvCpDIsLv2WGE05QTRwLll4OkIds_RKbxQXs_xz6rCU5jd_T9p04M2kEgEycdDZOryRVrkmya9tTH4rJB05Fm_yHXCfdwPniItf2-uoQ0BSjK6C7wYne3tbZijAhs-6VYlLUhdmmYhuIYdslLjFGRhcTmMRl3MhkQrKRt43NSm2Iw0UyX9iGh-f9CyYyg"
                            alt="Player">
                    </div>
                    <div class="player-info">
                        <div class="player-name">TreeHugger99</div>
                        <div class="player-dept">Botany</div>
                    </div>
                    <div class="player-points">
                        <span class="value">2.8k</span>
                    </div>
                </div>

                <div class="leaderboard-item stagger-item" style="opacity: 0.8;">
                    <div class="rank-number">7</div>
                    <div class="player-avatar">
                        <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuAz68XS9fbS5KdFQkOGw8J-KFnRJFTnbmqd8X7CDADm8hnTWhjbaGkuBe5gF85dVdQ9yPi7cZLaNH3MTPaCRZh_4mtBtvyg68ZHzgDA4l7Kb25lU9jucTyzc84S4DVqlLmWQlnVL26_E4ftFhEDk1qfOIiqRfEi8gu-7pEwx6qjJFMB9Bis2tjk7lHpZpGvBbQObXYDb-zrVvXdZaiuyAJiBDVck-lXEHE5Dw65wmi_c4060LoDIWAYoHEop0DFUKneLNz5R8gBJRw"
                            alt="Player">
                    </div>
                    <div class="player-info">
                        <div class="player-name">OceanBlue</div>
                        <div class="player-dept">Marine Biology</div>
                    </div>
                    <div class="player-points">
                        <span class="value">2.5k</span>
                    </div>
                </div>
            </div>

            <!-- Your Rank Card -->
            <div class="your-rank-card">
                <div class="your-rank-number">42</div>
                <div class="your-info">
                    <span class="your-label">You</span>
                    <span class="your-motivation">Keep pushing! ðŸ”¥</span>
                </div>
                <div class="your-points">
                    <span class="your-points-label">Total Pts</span>
                    <span class="your-points-value">1.2k</span>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <ul class="nav-list">
                <li class="nav-item">
                    <a href="../core/home.html" class="nav-link">
                        <span class="material-symbols-outlined icon">home</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../marketplace/marketplace.html" class="nav-link">
                        <span class="material-symbols-outlined icon">search</span>
                    </a>
                </li>
                <li class="nav-item nav-add-btn">
                    <a href="../scanner/result.html" class="icon-btn">
                        <span class="material-symbols-outlined icon">add</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../user/messages.html" class="nav-link">
                        <span class="material-symbols-outlined icon">chat_bubble</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../user/profile.html" class="nav-link active">
                        <span class="material-symbols-outlined icon icon-filled">person</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Noise Overlay -->
    <div class="noise-overlay"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="../../js/firebase-config.js"></script>
    <script src="../../js/services/gamification.js"></script>

    <script>
        let currentSortBy = 'xp';

        // Load leaderboard from Firebase (HARDCODED FOR DEMO)
        async function loadLeaderboard() {
            const listContainer = document.querySelector('.leaderboard-list');

            // HARDCODED MVP SQUAD
            const squad = [
                { name: 'Ankush Jha', xp: 15400, co2Saved: 150.5, level: 18, avatar: 'https://ui-avatars.com/api/?name=Ankush+Jha&background=22c358&color=fff', dept: 'Top Trader' },
                { name: 'Unnati Asthana', xp: 13500, co2Saved: 130.0, level: 16, avatar: 'https://ui-avatars.com/api/?name=Unnati+Asthana&background=random&color=fff', dept: 'ReLoop Pro' },
                { name: 'Uransh', xp: 11200, co2Saved: 95.5, level: 14, avatar: 'https://ui-avatars.com/api/?name=Uransh&background=random&color=fff', dept: 'Sustainability' },
                { name: 'Rudrakh Bairagi', xp: 9800, co2Saved: 75.0, level: 12, avatar: 'https://ui-avatars.com/api/?name=Rudrakh+Bairagi&background=random&color=fff', dept: 'Eco Warrior' },
                { name: 'GreenQueen', xp: 8500, co2Saved: 60.5, level: 10, avatar: 'https://ui-avatars.com/api/?name=Green+Queen&background=random&color=fff', dept: 'Recycler' },
                { name: 'EcoMaster', xp: 7200, co2Saved: 50.0, level: 9, avatar: 'https://ui-avatars.com/api/?name=Eco+Master&background=random&color=fff', dept: 'Green Team' },
                { name: 'PlanetPat', xp: 6400, co2Saved: 42.0, level: 8, avatar: 'https://ui-avatars.com/api/?name=Planet+Pat&background=random&color=fff', dept: 'Cleanup Crew' }
            ];

            // 1. Update Top Player Card (Ankush Jha)
            const top = squad[0];
            document.querySelector('.top-username').textContent = top.name;
            document.querySelector('.top-points .value').textContent = formatPoints(currentSortBy === 'xp' ? top.xp : top.co2Saved);
            document.querySelector('.level-badge').textContent = `Lvl ${top.level}`;
            document.querySelector('.top-avatar img').src = top.avatar;

            // 2. Generate List for Ranks 2+
            let listHTML = '';
            for (let i = 1; i < squad.length; i++) {
                const player = squad[i];
                const value = currentSortBy === 'xp' ? player.xp : player.co2Saved;
                const opacity = Math.max(0.6, 1 - (i * 0.05));

                listHTML += `
                    <div class="leaderboard-item stagger-item" style="opacity: ${opacity};">
                        <div class="rank-number">${i + 1}</div>
                        <div class="player-avatar">
                            <img src="${player.avatar}" alt="${player.name}">
                        </div>
                        <div class="player-info">
                            <div class="player-name">${player.name}</div>
                            <div class="player-dept">${player.dept}</div>
                        </div>
                        <div class="player-points">
                            <span class="material-symbols-outlined icon">${currentSortBy === 'xp' ? 'stars' : 'eco'}</span>
                            <span class="value">${formatPoints(value)}</span>
                        </div>
                    </div>
                `;
            }
            listContainer.innerHTML = listHTML;
            console.log('Loaded HARDCODED leaderboard');

            // Update Your Rank Card (Always Ankush for Demo)
            updateCurrentUserRank();
        }

        // Update current user's rank card
        async function updateCurrentUserRank() {
            // Hardcoded as Rank 1 (Ankush)
            document.querySelector('.your-rank-number').textContent = '1';
            document.querySelector('.your-points-value').textContent = '15.4k';
            document.querySelector('.your-label').textContent = 'Ankush Jha';
            document.querySelector('.your-motivation').textContent = "You're the Champion! ðŸ†";
        }

        // Format points
        function formatPoints(pts) {
            if (pts >= 1000) {
                return (pts / 1000).toFixed(1) + 'k';
            }
            return pts.toString();
        }

        // Toggle sort between XP and CO2
        function toggleSort() {
            currentSortBy = currentSortBy === 'xp' ? 'co2Saved' : 'xp';

            // Update subtitle
            const subtitle = document.querySelector('.leaderboard-subtitle');
            subtitle.textContent = currentSortBy === 'xp' ? 'Top 50 by XP' : 'Top 50 by CO2 Saved';

            // Update icon in top player card
            const topIcon = document.querySelector('.top-points .icon');
            topIcon.textContent = currentSortBy === 'xp' ? 'trophy' : 'eco';

            loadLeaderboard();
        }

        // Add sort toggle button to header
        document.addEventListener('DOMContentLoaded', () => {
            const header = document.querySelector('.leaderboard-header');
            const toggleBtn = document.createElement('button');
            toggleBtn.className = 'sort-toggle-btn';
            toggleBtn.innerHTML = '<span class="material-symbols-outlined">swap_vert</span>';
            toggleBtn.style.cssText = `
                position: absolute;
                top: var(--space-6);
                right: var(--space-4);
                width: 40px;
                height: 40px;
                border-radius: var(--radius-full);
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border: 1px solid var(--color-border);
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--color-text-primary);
                cursor: pointer;
                transition: all var(--transition-base);
            `;
            toggleBtn.onclick = toggleSort;
            header.appendChild(toggleBtn);
        });

        // Load on auth state change
        // FORCE LOAD IMMEDIATELY
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Forcing Mock Leaderboard...');
            loadLeaderboard();
        });

        // Disable standard listener
        firebase.auth().onAuthStateChanged(user => {
            console.log('Auth check ignored on Leaderboard');
        });
    </script>
</body>

</html>